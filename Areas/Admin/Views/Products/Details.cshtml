

@using System.Globalization
@model JDshop.Models.Product

@{
    ViewData["Title"] = "Chi tiết sản phẩm";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

<style>
    .page-header {
        background: white;
        padding: 1.5rem;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .page-title {
        margin: 0;
        color: #2c3e50;
        font-size: 1.75rem;
        font-weight: 600;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    .breadcrumb-nav {
        background: none;
        padding: 0;
        margin: 0;
        font-size: 0.875rem;
    }

        .breadcrumb-nav .breadcrumb-item a {
            color: #3498db;
            text-decoration: none;
        }

        .breadcrumb-nav .breadcrumb-item.active {
            color: #7f8c8d;
        }

    .product-details-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        margin-bottom: 5px;
    }

    .product-images-section {
        background: white;
        border-radius: 8px 0 0 8px;
        padding: 1.5rem;
    }

    .main-image {
        width: 100%;
        max-width: 400px;
        height: 400px;
        object-fit: cover;
        border-radius: 8px;
        border: 2px solid #ecf0f1;
        margin-bottom: 1rem;
    }

    .image-gallery {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
    }

    .thumbnail-image {
        width: 60px;
        height: 60px;
        object-fit: cover;
        border-radius: 6px;
        border: 2px solid #ecf0f1;
        cursor: pointer;
        transition: all 0.3s;
    }

        .thumbnail-image:hover,
        .thumbnail-image.active {
            border-color: #3498db;
            transform: scale(1.05);
        }

    .no-image-placeholder {
        width: 100%;
        height: 400px;
        background: #f8f9fa;
        border: 2px dashed #dee2e6;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: #6c757d;
    }

        .no-image-placeholder i {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

    .product-info-section {
        background: white;
        border-radius: 0 8px 8px 0;
        padding: 1.5rem;
    }

    .product-title {
        color: #2c3e50;
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1rem;
        border-bottom: 2px solid #ecf0f1;
        padding-bottom: 1rem;
    }

    .info-grid {
        display: grid;
        gap: 1.5rem;
    }

    .info-item {
        display: flex;
        align-items: flex-start;
        padding: 1rem;
        background: #f8f9fa;
        border-radius: 6px;
        border-left: 4px solid #3498db;
    }

    .info-label {
        font-weight: 600;
        color: #2c3e50;
        min-width: 120px;
        margin-right: 1rem;
        font-size: 0.875rem;
    }

    .info-value {
        color: #34495e;
        flex: 1;
        font-size: 0.875rem;
        line-height: 1.5;
    }

    .price-display {
        font-size: 1.25rem;
        font-weight: 600;
        color: #27ae60;
    }

    .status-badge {
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .status-active {
        background-color: #d4edda;
        color: #155724;
    }

    .status-inactive {
        background-color: #f8d7da;
        color: #721c24;
    }

    .product-type-badge {
        background-color: #e3f2fd;
        color: #1976d2;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        font-size: 0.875rem;
        font-weight: 500;
        display: inline-block;
    }

    .description-box {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 6px;
        padding: 1rem;
        line-height: 1.6;
        color: #495057;
    }

    .action-buttons {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        padding: 1.5rem;
        display: flex;
        gap: 1rem;
        justify-content: flex-start;
        align-items: center;
    }

    .btn {
        padding: 0.75rem 1.5rem;
        border-radius: 6px;
        font-weight: 500;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        transition: all 0.3s;
        border: none;
        cursor: pointer;
    }

    .btn-primary {
        background-color: #3498db;
        color: white;
    }

        .btn-primary:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
        }

    .btn-secondary {
        background-color: #95a5a6;
        color: white;
    }

        .btn-secondary:hover {
            background-color: #7f8c8d;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(149, 165, 166, 0.3);
        }

    .btn-danger {
        background-color: #e74c3c;
        color: white;
    }

        .btn-danger:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3);
        }

    .additional-info {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        padding: 1.5rem;
        margin-top: 2rem;
    }

    .section-title {
        color: #2c3e50;
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .meta-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
    }

    .meta-item {
        background: #f8f9fa;
        padding: 1rem;
        border-radius: 6px;
        text-align: center;
    }

    .meta-label {
        font-size: 0.75rem;
        color: #7f8c8d;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 0.5rem;
    }

    .meta-value {
        font-weight: 600;
        color: #2c3e50;
    }

    
</style>

<div class="page-header">
    <div>
        <h1 class="page-title">
            <i class="fas fa-eye me-2"></i>
            Chi tiết sản phẩm
        </h1>
        
    </div>
</div>

<div class="product-details-container">
    <!-- Product Images Section -->
    <div class="product-images-section">
        @if (Model.Images?.Any() == true)
        {
            <img src="@Url.Content("~/contents/Images/Product/" + Model.Images.FirstOrDefault()?.Url)"
                 class="main-image"
                 alt="@Model.Name"
                 id="mainImage"
                 onerror="this.style.display='none'; document.getElementById('noImagePlaceholder').style.display='flex';">

                <div class="image-gallery">
                    @foreach (var image in Model.Images)
                    {
                        <img src="@Url.Content("~/contents/Images/Product/" + image.Url)"
                             class="thumbnail-image @(Model.Images.FirstOrDefault() == image ? "active" : "")"
                             alt="@Model.Name"
                             onclick="changeMainImage(this.src)"
                             onerror="this.style.display='none';">
                    }
                </div>
        }
        else
        {
            <div class="no-image-placeholder" id="noImagePlaceholder">
                <i class="fas fa-image"></i>
                <h5>Chưa có hình ảnh</h5>
                <p class="text-muted">Sản phẩm này chưa có hình ảnh</p>
            </div>
        }
    </div>

    <!-- Product Information Section -->
    <div class="product-info-section">
        <h2 class="product-title">@Model.Name</h2>

        <div class="info-grid">
            <div class="info-item">
                <span class="info-label">
                    <i class="fas fa-tag me-1"></i>
                    Tên sản phẩm:
                </span>
                <span class="info-value">@Model.Name</span>
            </div>

            <div class="info-item">
                <span class="info-label">
                    <i class="fas fa-dollar-sign me-1"></i>
                    Đơn giá:
                </span>
                <span class="info-value price-display">
                    @string.Format(new CultureInfo("vi-VN"), "{0:C0}", Model.Price)
                </span>
            </div>

            <div class="info-item">
                <span class="info-label">
                    <i class="fas fa-toggle-on me-1"></i>
                    Trạng thái:
                </span>
                <span class="info-value">
                    @if (Model.Status == 1)
                    {
                        <span class="status-badge status-active">
                            <i class="fas fa-check-circle"></i>
                            Đang hoạt động
                        </span>
                    }
                    else
                    {
                        <span class="status-badge status-inactive">
                            <i class="fas fa-times-circle"></i>
                            Ngừng hoạt động
                        </span>
                    }
                </span>
            </div>

            <div class="info-item">
                <span class="info-label">
                    <i class="fas fa-layer-group me-1"></i>
                    Loại sản phẩm:
                </span>
                <span class="info-value">
                    @if (!string.IsNullOrEmpty(Model.ProductType?.Name))
                    {
                        <span class="product-type-badge">@Model.ProductType.Name</span>
                    }
                    else
                    {
                        <span class="text-muted">Chưa phân loại</span>
                    }
                </span>
            </div>

            <div class="info-item">
                <span class="info-label">
                    <i class="fas fa-align-left me-1"></i>
                    Mô tả:
                </span>
                <div class="info-value">
                    @if (!string.IsNullOrEmpty(Model.Description))
                    {
                        <div class="description-box">@Model.Description</div>
                    }
                    else
                    {
                        <span class="text-muted">Chưa có mô tả</span>
                    }
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Action Buttons -->
<div class="action-buttons">
    <a class="btn btn-primary" asp-action="Edit" asp-route-id="@Model?.Id">
        <i class="fas fa-edit"></i>
        Chỉnh sửa
    </a>
    <a class="btn btn-secondary" asp-action="Index">
        <i class="fas fa-arrow-left"></i>
        Quay lại danh sách
    </a>
    <a class="btn btn-danger" asp-action="Delete" asp-route-id="@Model?.Id"
       onclick="return confirm('Bạn có chắc chắn muốn xóa sản phẩm này?')">
        <i class="fas fa-trash"></i>
        Xóa sản phẩm
    </a>
</div>

<script>
    function changeMainImage(src) {
        const mainImage = document.getElementById('mainImage');
        const thumbnails = document.querySelectorAll('.thumbnail-image');

        mainImage.src = src;

        // Update active thumbnail
        thumbnails.forEach(thumb => {
            thumb.classList.remove('active');
            if (thumb.src === src) {
                thumb.classList.add('active');
            }
        });
    }

    // Add loading animation for images
    document.addEventListener('DOMContentLoaded', function() {
        const images = document.querySelectorAll('img');
        images.forEach(img => {
            img.addEventListener('load', function() {
                this.style.opacity = '1';
            });
            // img.style.opacity = '0';
            img.style.transition = 'opacity 0.3s';
        });
    });
</script>